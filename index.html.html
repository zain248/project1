<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>js Cart</title>
    <link rel="stylesheet" href="js_cart.css" />
  </head>
  <body>
    <nav>
      <div class="logo"></div>
      <div class="carticon" onclick="cartappear()">
        <div class="reddiv"></div>
      </div>
    </nav>
    <div class="main"></div>
    <div class="textdiv">
      <h1>Online Courses</h1>
    </div>

    <div class="coursemain">
      <div class="coursediv">
        <div class="courseimg">
          <img src="./course1.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">HTML5,CSS,JAVASCRIPT For Beginners</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>

      <div class="coursediv coursediv1">
        <div class="courseimg">
          <img src="./course2.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">Cooking Course</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>

      <div class="coursediv coursediv3">
        <div class="courseimg">
          <img src="./course3.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">Guitar for Beginners</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>

      <div class="coursediv coursediv4">
        <div class="courseimg">
          <img src="./course4.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">Orchard at Home</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>

      <div class="coursediv coursediv5">
        <div class="courseimg">
          <img src="./course5.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">Home Decor with Recycled Products</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>

      <div class="coursediv coursediv6">
        <div class="courseimg">
          <img src="./course1.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">Web Development for Beginners</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>

      <div class="coursediv coursediv7">
        <div class="courseimg">
          <img src="./course2.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">Leam to Cook Mexican Food</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>

      <div class="coursediv coursediv9">
        <div class="courseimg">
          <img src="./course3.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">Harvest Your Fruit And Vegetables</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>

      <div class="coursediv coursediv7">
        <div class="courseimg">
          <img src="./course2.jpg" alt="" srcset="" />
        </div>
        <div class="textdiv">
          <h4 class="coursename">Leam to Cook Mexican Food</h4>
          <h5 class="sellername">juan Pedro</h5>
          <img src="./stars.png" alt="" class="rating" />
          <div class="pricediv">
            <p>$200</p>
            <p class="myprice">$15</p>
          </div>
          <button type="button" class="btn1">ADD TO CART</button>
        </div>
      </div>
    </div>

    <div class="cartdiv">
      <div class="cartnav">
        <div class="cartimgsec">
          <p>Product Image</p>
        </div>
        <div class="cartnamesec">
          <p>Product Name</p>
        </div>
        <div class="cartpricesec">
          <p>Product Price</p>
        </div>
      </div>
        <button class="clrbtn" onclick="myclear()">clear all</button>
      <div class="cartmain"></div>
    </div>
  </body>
  <script>
    let cartdiv = document.getElementsByClassName("cartdiv")[0];
    let reddiv = document.getElementsByClassName("reddiv")[0]
    reddiv.innerHTML ="0"

    function myclear(){
        alert("are you sure you want to clear product list")
        localStorage.clear()
        renderdata()
        reddiv.innerHTML ="0"

    }

    function cartappear() {
      if (cartdiv.style.right == "-35%") {
        cartdiv.style.right = "0";
      } else {
        cartdiv.style.right = "-35%";
      }
    }

    let btn1 = document.querySelectorAll(".btn1");

    btn1.forEach(
      (element) =>
        (element.onclick = (e) => {
          let parent = e.target.parentElement.parentElement;
          storetolocalstorage(parent);
        })
    );

    function storetolocalstorage(parent) {
      let img = parent.querySelector("img").src;
      let s_name = parent.querySelector("h4").innerText;
      let price = parent.getElementsByClassName("myprice")[0].innerText;

      let obj = { img, s_name, price };
      // console.log(obj);

      let data = JSON.parse(localStorage.getItem("item"));
      if (!data) {
        localStorage.setItem("item", JSON.stringify([obj]));
      } else {
        data.push(obj);
        localStorage.setItem("item", JSON.stringify(data));
      }
      renderdata();
    }

    renderdata()

    function renderdata() {
      let listitems = JSON.parse(localStorage.getItem("item"));
      // console.log(listitems);

      let cartmain = document.getElementsByClassName("cartmain")[0];
      cartmain.innerHTML = "";

      if (listitems) {
          listitems.map((ele, index) => {
              reddiv.innerHTML = listitems.length;


          console.log(cartmain.length);
          

          let cartshowdiv = document.createElement("div");
          cartshowdiv.className = "cartshowdiv";
          cartmain.appendChild(cartshowdiv);

          let cartimgdiv = document.createElement("div");
          cartimgdiv.className = "cartimgdiv";
          cartshowdiv.appendChild(cartimgdiv);
          
          let cartimg = document.createElement("img");
          cartimg.className = "cartimg";
          cartimg.src = ele.img;
          cartimgdiv.appendChild(cartimg);

          let cartnamediv = document.createElement("div");
          cartnamediv.className = "cartnamediv";
          cartnamediv.innerText = ele.s_name;
          cartshowdiv.appendChild(cartnamediv);

          let cartpricediv = document.createElement("div");
          cartpricediv.className = "cartpricediv";
          cartpricediv.innerText = ele.price;
          cartshowdiv.appendChild(cartpricediv);

          let cartdelbtn = document.createElement("button");
          cartdelbtn.className = "cartdelbtn";
          cartdelbtn.innerText = "Delete Item";
          cartshowdiv.appendChild(cartdelbtn);

          // console.log(index,ele);

          cartdelbtn.onclick = (delitem) => {
              alert("are you sure you want to delete this item")
            listitems.splice(index, 1);
            localStorage.setItem("item", JSON.stringify(listitems));
            // window.location.reload();
            // cartdelbtn.remove()
            renderdata()
            console.log("hello");
            if(listitems.length==0){
                reddiv.innerHTML ="0"
            }
          };
          
        });
        
        }
        else{
            cartmain.innerHTML=`<h1>no data</h1>`
        }



    }

    // let btn1 = document.querySelectorAll(".btn1")
    // // console.log(btn1);
    // btn1.forEach(element => {element.onclick=(e)=> {
    //     let parent = e.target.parentElement.parentElement
    //     console.log(parent);
    //     storeinlocalstorage(parent);
    // }

    // });

    // function storeinlocalstorage(parent){
    //     let img = parent.querySelector("img").src
    //     let c_name = parent.querySelector("h4").innerText
    //     let price = parent.getElementsByClassName("myprice")[0].innerText
    //     console.log(price);

    //     let obj = {img,c_name,price}

    //     let data = JSON.parse(localStorage.getItem("data"))
    //     if(!data){
    //         localStorage.setItem("data",JSON.stringify([obj]))
    //     }
    //     else{
    //         data.push(obj)
    //         localStorage.setItem("data",JSON.stringify(data))

    //     }

    // }
  </script>
</html>
